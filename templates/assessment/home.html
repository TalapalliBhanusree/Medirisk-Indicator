{% extends 'base.html' %}
{% load static %}

{% block title %}MediRisk Indicator - AI-Powered Cardiovascular Risk Assessment{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6" data-aos="fade-right">
                <div class="hero-content">
                    <div class="badge bg-primary-gradient text-white px-4 py-2 rounded-pill mb-4">
                        <i class="fas fa-award me-2"></i>
                        FDA Approved Algorithms
                    </div>
                    <h1 class="hero-title">
                        Revolutionary <span class="text-gradient">AI-Powered</span><br>
                        Cardiovascular Risk Assessment
                    </h1>
                    <p class="hero-subtitle">
                        Experience the future of heart health with our advanced machine learning platform. 
                        Get personalized risk analysis, real-time monitoring, and expert recommendations 
                        tailored to your unique health profile.
                    </p>
                    <div class="hero-buttons">
                        {% if user.is_authenticated %}
                        <a href="{% url 'assessment_form' %}" class="btn btn-primary btn-lg me-3 glow">
                            <i class="fas fa-heartbeat me-2"></i>Start Free Assessment
                        </a>
                        <a href="{% url 'dashboard' %}" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-tachometer-alt me-2"></i>View Dashboard
                        </a>
                        {% else %}
                        <a href="{% url 'register' %}" class="btn btn-primary btn-lg me-3 glow">
                            <i class="fas fa-rocket me-2"></i>Get Started Free
                        </a>
                        <a href="#features" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-play me-2"></i>Watch Demo
                        </a>
                        {% endif %}
                    </div>
                    
                    <!-- Trust Indicators -->
                    <div class="trust-indicators mt-5">
                        <div class="row g-3">
                            <div class="col-auto">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-shield-alt text-success me-2"></i>
                                    <small class="text-muted">HIPAA Compliant</small>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-certificate text-primary me-2"></i>
                                    <small class="text-muted">ISO 27001 Certified</small>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-users text-warning me-2"></i>
                                    <small class="text-muted">10,000+ Patients</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left">
                <div class="hero-visual">
                    <div class="floating-card">
                        <div class="medical-card text-center">
                            <div class="medical-icon mx-auto mb-3">
                                <i class="fas fa-heartbeat heartbeat"></i>
                            </div>
                            <h5 class="card-title mb-3">Real-time Risk Analysis</h5>
                            <div class="risk-meter mb-4">
                                <canvas id="heroRiskMeter" width="250" height="250"></canvas>
                            </div>
                            <div class="row g-3 text-center">
                                <div class="col-4">
                                    <div class="metric-small">
                                        <div class="value text-success">Low</div>
                                        <div class="label">Current Risk</div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="metric-small">
                                        <div class="value text-primary">95%</div>
                                        <div class="label">Accuracy</div>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="metric-small">
                                        <div class="value text-warning">24/7</div>
                                        <div class="label">Monitoring</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Floating Elements -->
                    <div class="floating-elements">
                        <div class="floating-element" style="top: 10%; right: 10%; animation-delay: 0s;">
                            <i class="fas fa-stethoscope"></i>
                        </div>
                        <div class="floating-element" style="bottom: 20%; left: 10%; animation-delay: 1s;">
                            <i class="fas fa-pills"></i>
                        </div>
                        <div class="floating-element" style="top: 60%; right: 20%; animation-delay: 2s;">
                            <i class="fas fa-dna"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="features-section">
    <div class="container">
        <div class="row text-center mb-5" data-aos="fade-up">
            <div class="col-12">
                <h2 class="section-title">Why Healthcare Professionals Choose MediRisk</h2>
                <p class="section-subtitle">
                    Cutting-edge technology meets clinical excellence for comprehensive cardiovascular care
                </p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-card h-100">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h4>Advanced AI Analysis</h4>
                    <p>
                        Our proprietary machine learning algorithms analyze over 50 risk factors 
                        using data from millions of patient records for unparalleled accuracy.
                    </p>
                    <div class="feature-stats mt-4">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="stat-mini">
                                    <div class="number">95%</div>
                                    <div class="label">Accuracy</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="stat-mini">
                                    <div class="number">50+</div>
                                    <div class="label">Risk Factors</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-card h-100">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h4>Real-time Monitoring</h4>
                    <p>
                        Continuous health tracking with instant alerts and personalized insights. 
                        Monitor trends, track improvements, and receive proactive recommendations.
                    </p>
                    <div class="feature-stats mt-4">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="stat-mini">
                                    <div class="number">24/7</div>
                                    <div class="label">Monitoring</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="stat-mini">
                                    <div class="number">Real-time</div>
                                    <div class="label">Alerts</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-card h-100">
                    <div class="feature-icon">
                        <i class="fas fa-file-medical-alt"></i>
                    </div>
                    <h4>Clinical Reports</h4>
                    <p>
                        Generate comprehensive PDF reports with detailed analysis, recommendations, 
                        and treatment plans that integrate seamlessly with EMR systems.
                    </p>
                    <div class="feature-stats mt-4">
                        <div class="row text-center">
                            <div class="col-6">
                                <div class="stat-mini">
                                    <div class="number">PDF</div>
                                    <div class="label">Export</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="stat-mini">
                                    <div class="number">EMR</div>
                                    <div class="label">Integration</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="400">
                <div class="feature-card h-100">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h4>Enterprise Security</h4>
                    <p>
                        Bank-level encryption, HIPAA compliance, and SOC 2 certification ensure 
                        your patient data remains secure and private at all times.
                    </p>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="500">
                <div class="feature-card h-100">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h4>Mobile Optimized</h4>
                    <p>
                        Access your dashboard anywhere with our responsive design and native mobile apps. 
                        Perfect for busy healthcare professionals on the go.
                    </p>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="600">
                <div class="feature-card h-100">
                    <div class="feature-icon">
                        <i class="fas fa-users-cog"></i>
                    </div>
                    <h4>Team Collaboration</h4>
                    <p>
                        Enable seamless collaboration between cardiologists, primary care physicians, 
                        and specialists with shared patient insights and treatment coordination.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Statistics Section -->
<section class="stats-section">
    <div class="container">
        <div class="row text-center text-white">
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="stat-item">
                    <div class="stat-number" data-count="{{ total_assessments|default:15847 }}">0</div>
                    <div class="stat-label">Assessments Completed</div>
                    <div class="stat-description">Comprehensive cardiovascular evaluations</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="stat-item">
                    <div class="stat-number" data-count="{{ high_risk_patients|default:3247 }}">0</div>
                    <div class="stat-label">High-Risk Patients Identified</div>
                    <div class="stat-description">Early intervention opportunities</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                <div class="stat-item">
                    <div class="stat-number" data-count="97">0</div>
                    <div class="stat-label">Accuracy Rate</div>
                    <div class="stat-description">Validated against clinical outcomes</div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
                <div class="stat-item">
                    <div class="stat-number" data-count="500">0</div>
                    <div class="stat-label">Healthcare Providers</div>
                    <div class="stat-description">Trusted by medical professionals</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="how-it-works py-5">
    <div class="container">
        <div class="row text-center mb-5" data-aos="fade-up">
            <div class="col-12">
                <h2 class="section-title">How MediRisk Works</h2>
                <p class="section-subtitle">
                    Simple, fast, and accurate cardiovascular risk assessment in three easy steps
                </p>
            </div>
        </div>
        
        <div class="row g-5">
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
                <div class="step-card text-center">
                    <div class="step-number">1</div>
                    <div class="step-icon">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <h4>Complete Assessment</h4>
                    <p>
                        Fill out our comprehensive questionnaire covering medical history, 
                        lifestyle factors, and current health metrics in just 5 minutes.
                    </p>
                </div>
            </div>
            
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
                <div class="step-card text-center">
                    <div class="step-number">2</div>
                    <div class="step-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <h4>AI Analysis</h4>
                    <p>
                        Our advanced algorithms process your data using machine learning models 
                        trained on millions of patient records for precise risk calculation.
                    </p>
                </div>
            </div>
            
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="300">
                <div class="step-card text-center">
                    <div class="step-number">3</div>
                    <div class="step-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <h4>Get Results</h4>
                    <p>
                        Receive detailed risk analysis, personalized recommendations, 
                        and actionable insights to improve your cardiovascular health.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Recent Assessments -->
{% if recent_assessments %}
<section class="recent-assessments py-5 bg-light">
    <div class="container">
        <div class="row" data-aos="fade-up">
            <div class="col-12">
                <h3 class="section-title text-center mb-5">Recent Patient Assessments</h3>
            </div>
        </div>
        <div class="row g-4">
            {% for assessment in recent_assessments %}
            <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add:100 }}">
                <div class="assessment-card">
                    <div class="card-header">
                        <div class="patient-info">
                            <div class="patient-avatar">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div>
                                <h6 class="mb-0">{{ assessment.patient.first_name }} {{ assessment.patient.last_name }}</h6>
                                <small class="text-muted">{{ assessment.created_at|date:"M d, Y" }}</small>
                            </div>
                        </div>
                        <div class="risk-badge risk-{{ assessment.risk_level }}">
                            {{ assessment.get_risk_level_display }}
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="risk-visualization mb-3">
                            <div class="risk-circle risk-{{ assessment.risk_level }}">
                                <span class="risk-score">{{ assessment.risk_score }}</span>
                                <span class="max-score">/40</span>
                            </div>
                        </div>
                        <div class="risk-details">
                            <div class="risk-percentage mb-2">
                                <strong>{{ assessment.ten_year_risk_percentage|floatformat:1 }}%</strong> 
                                10-year cardiovascular risk
                            </div>
                            <div class="key-factors">
                                <small class="text-muted">
                                    Key factors: Age {{ assessment.patient.age }}, 
                                    {% if assessment.smoking %}Smoking, {% endif %}
                                    {% if assessment.diabetes %}Diabetes, {% endif %}
                                    BMI {{ assessment.bmi|floatformat:1 }}
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5" data-aos="fade-up">
            <a href="{% url 'assessment_form' %}" class="btn btn-primary btn-lg">
                <i class="fas fa-plus me-2"></i>Create New Assessment
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Testimonials Section -->
<section class="testimonials py-5">
    <div class="container">
        <div class="row text-center mb-5" data-aos="fade-up">
            <div class="col-12">
                <h2 class="section-title">Trusted by Healthcare Professionals</h2>
                <p class="section-subtitle">
                    See what medical experts are saying about MediRisk Indicator
                </p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <div class="stars mb-3">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                        <p class="testimonial-text">
                            "MediRisk has revolutionized how we assess cardiovascular risk in our practice. 
                            The AI-powered insights help us identify high-risk patients earlier and provide 
                            more targeted interventions."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80" alt="Dr. Sarah Johnson" class="rounded-circle">
                        </div>
                        <div class="author-info">
                            <h6 class="mb-0">Dr. Sarah Johnson</h6>
                            <small class="text-muted">Cardiologist, Mayo Clinic</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <div class="stars mb-3">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                        <p class="testimonial-text">
                            "The accuracy and speed of MediRisk assessments are impressive. It's become 
                            an essential tool in our preventive cardiology program, helping us save lives 
                            through early detection."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://images.unsplash.com/photo-1582750433449-648ed127bb54?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80" alt="Dr. Michael Chen" class="rounded-circle">
                        </div>
                        <div class="author-info">
                            <h6 class="mb-0">Dr. Michael Chen</h6>
                            <small class="text-muted">Chief of Cardiology, Johns Hopkins</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="300">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <div class="stars mb-3">
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                            <i class="fas fa-star text-warning"></i>
                        </div>
                        <p class="testimonial-text">
                            "Patient engagement has significantly improved since we started using MediRisk. 
                            The visual reports help patients understand their risk and motivate them to 
                            make lifestyle changes."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80" alt="Dr. Emily Rodriguez" class="rounded-circle">
                        </div>
                        <div class="author-info">
                            <h6 class="mb-0">Dr. Emily Rodriguez</h6>
                            <small class="text-muted">Family Medicine, Cleveland Clinic</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section bg-primary-gradient text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8" data-aos="fade-right">
                <h2 class="display-5 fw-bold mb-3">Ready to Transform Your Practice?</h2>
                <p class="lead mb-4">
                    Join thousands of healthcare professionals using MediRisk to provide 
                    better cardiovascular care and improve patient outcomes.
                </p>
                <div class="cta-features">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-check-circle me-3 fs-5"></i>
                                <span>Free 30-day trial</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-check-circle me-3 fs-5"></i>
                                <span>No setup fees</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-check-circle me-3 fs-5"></i>
                                <span>24/7 support included</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-check-circle me-3 fs-5"></i>
                                <span>HIPAA compliant</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-center" data-aos="fade-left">
                <div class="cta-buttons">
                    {% if user.is_authenticated %}
                    <a href="{% url 'assessment_form' %}" class="btn btn-light btn-lg mb-3 w-100">
                        <i class="fas fa-heartbeat me-2"></i>Start Assessment Now
                    </a>
                    <a href="{% url 'dashboard' %}" class="btn btn-outline-light btn-lg w-100">
                        <i class="fas fa-tachometer-alt me-2"></i>Go to Dashboard
                    </a>
                    {% else %}
                    <a href="{% url 'register' %}" class="btn btn-light btn-lg mb-3 w-100">
                        <i class="fas fa-rocket me-2"></i>Start Free Trial
                    </a>
                    <a href="{% url 'contact' %}" class="btn btn-outline-light btn-lg w-100">
                        <i class="fas fa-phone me-2"></i>Schedule Demo
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
/* Additional styles for home page */
.metric-small {
    padding: 0.5rem;
}

.metric-small .value {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
}

.metric-small .label {
    font-size: 0.75rem;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.floating-elements {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.floating-element {
    position: absolute;
    width: 60px;
    height: 60px;
    background: rgba(59, 130, 246, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    font-size: 1.5rem;
    animation: floatElement 4s ease-in-out infinite;
}

@keyframes floatElement {
    0%, 100% {
        transform: translateY(0px) rotate(0deg);
        opacity: 0.7;
    }
    50% {
        transform: translateY(-15px) rotate(180deg);
        opacity: 1;
    }
}

.feature-stats {
    border-top: 1px solid rgba(59, 130, 246, 0.1);
    padding-top: 1rem;
}

.stat-mini .number {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary-color);
}

.stat-mini .label {
    font-size: 0.75rem;
    color: #6b7280;
    text-transform: uppercase;
}

.step-card {
    position: relative;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.95);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-lg);
    transition: all 0.3s ease;
}

.step-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-2xl);
}

.step-number {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 40px;
    background: var(--gradient-primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.25rem;
}

.step-icon {
    width: 80px;
    height: 80px;
    background: rgba(59, 130, 246, 0.1);
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 2rem auto 1.5rem;
    color: var(--primary-color);
    font-size: 2rem;
}

.patient-avatar {
    width: 40px;
    height: 40px;
    background: var(--gradient-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    margin-right: 1rem;
}

.risk-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    position: relative;
}

.risk-circle.risk-low {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
}

.risk-circle.risk-moderate {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
}

.risk-circle.risk-high {
    background: linear-gradient(135deg, #f97316, #ea580c);
    color: white;
}

.risk-circle.risk-very_high {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
}

.testimonial-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: var(--radius-2xl);
    padding: 2rem;
    box-shadow: var(--shadow-lg);
    transition: all 0.3s ease;
    height: 100%;
}

.testimonial-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-2xl);
}

.testimonial-text {
    font-style: italic;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.testimonial-author {
    display: flex;
    align-items: center;
}

.author-avatar {
    margin-right: 1rem;
}

.author-avatar img {
    width: 50px;
    height: 50px;
    object-fit: cover;
}

.cta-section {
    position: relative;
    overflow: hidden;
}

.cta-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover;
    opacity: 0.1;
    z-index: -1;
}

.avatar-circle {
    width: 32px;
    height: 32px;
    background: var(--gradient-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.875rem;
}

.stat-description {
    font-size: 0.875rem;
    opacity: 0.8;
    margin-top: 0.5rem;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Hero risk meter animation
    const ctx = document.getElementById('heroRiskMeter');
    if (ctx) {
        const gradient = ctx.getContext('2d').createLinearGradient(0, 0, 0, 250);
        gradient.addColorStop(0, '#10b981');
        gradient.addColorStop(0.5, '#f59e0b');
        gradient.addColorStop(1, '#ef4444');
        
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [25, 75],
                    backgroundColor: [gradient, '#e5e7eb'],
                    borderWidth: 0,
                    cutout: '75%'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                animation: {
                    animateRotate: true,
                    duration: 2500,
                    easing: 'easeInOutQuart'
                }
            },
            plugins: [{
                id: 'centerText',
                beforeDraw: function(chart) {
                    const ctx = chart.ctx;
                    ctx.save();
                    const centerX = chart.chartArea.left + (chart.chartArea.right - chart.chartArea.left) / 2;
                    const centerY = chart.chartArea.top + (chart.chartArea.bottom - chart.chartArea.top) / 2;
                    
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.font = 'bold 28px Poppins';
                    ctx.fillStyle = '#1f2937';
                    ctx.fillText('25%', centerX, centerY - 8);
                    
                    ctx.font = '14px Inter';
                    ctx.fillStyle = '#6b7280';
                    ctx.fillText('Risk Level', centerX, centerY + 18);
                    ctx.restore();
                }
            }]
        });
    }

    // Enhanced counter animation with easing
    const counters = document.querySelectorAll('.stat-number[data-count]');
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                const counter = entry.target;
                const target = parseInt(counter.getAttribute('data-count'));
                const duration = 2500;
                const startTime = performance.now();
                
                const easeOutQuart = (t) => 1 - Math.pow(1 - t, 4);
                
                const updateCounter = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easedProgress = easeOutQuart(progress);
                    const current = Math.floor(easedProgress * target);
                    
                    counter.textContent = current.toLocaleString();
                    
                    if (progress < 1) {
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.textContent = target.toLocaleString();
                    }
                };
                
                requestAnimationFrame(updateCounter);
                counterObserver.unobserve(counter);
            }
        });
    }, { threshold: 0.5 });

    counters.forEach(counter => {
        counterObserver.observe(counter);
    });

    // Parallax effect for hero section
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const heroSection = document.querySelector('.hero-section');
        if (heroSection) {
            const rate = scrolled * -0.5;
            heroSection.style.transform = `translateY(${rate}px)`;
        }
    });

    // Smooth reveal animations for cards
    const cards = document.querySelectorAll('.feature-card, .testimonial-card, .step-card');
    const cardObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, { threshold: 0.1 });

    cards.forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        cardObserver.observe(card);
    });
});
</script>
{% endblock %}
